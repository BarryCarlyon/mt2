<md-dialog class="settings-dialog">
  <form ng-cloak>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Settings</h2>
        <md-button class="md-icon-button" ng-click="cancel()">
          <md-icon>close</md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content class="settings-dialog-content">
      {{settings}}
      <div class="md-dialog-content">
        <md-tabs md-dynamic-height md-border-bottom>
          <md-tab label="Appearance">
            <md-content class="md-padding">
              <div layout="row" layout-s="column">
                <div class="settings-column" flex layout="column">
                  <div class="settings-row" layout="row" layout-align="start space-between">
                    <label for="style" flex="none">Style</label>
                    <span flex></span>
                    <div flex="none">
                      <md-select name="style" class="compact md-no-underline" ng-model="settings.style">
                        <md-option value="dark">dark mode</md-option>
                        <md-option value="light">light mode</md-option>
                        <md-option value="custom">custom style</md-option>
                      </md-select>
                      <md-input-container>
                        <input type="text" ng-model="settings.styleSheet" ng-show="settings.style === 'custom'" placeholder="style sheet url">
                      </md-input-container>
                    </div>
                  </div>
                </div>
              </div>
              <div flex>

              </div>
            </md-content>
          </md-tab>
          <md-tab label="Moderation">
            <md-content class="md-padding">
              <h3>In-line moderation icons</h3>
              <ul ui-sortable="{handle: '> .drag-handle'}" ng-model="settings.modButtons">
                <li ng-repeat="button in settings.modButtons" layout="row" class="settings-mod-button md-whiteframe-2dp">
                  <div flex="none" layout="column">
                      <div flex="none" class="drag-handle">
                        <md-icon>reorder</md-icon>
                      </div>
                      <div flex="none">
                        <md-button class="compact" ng-click="dialogCtrl.deleteModButton(button)">
                            <md-icon>delete</md-icon>
                        </md-button>
                      </div>
                  </div>
                  <div flex="20">
                    <md-input-container class="text-input">
                      <input type="text" ng-model="button.tooltip" placeholder="Button name">
                    </md-input-container>
                  </div>
                  <div flex="40" layout="row">
                    <md-input-container flex class="dropdown">
                      <label>Icon type</label>
                      <md-select name="style" class="compact md-no-underline" ng-model="button.icon.type" placeholder="Icon type">
                        <md-option value="icon">Icon</md-option>
                        <md-option value="text">Text</md-option>
                        <md-option value="image">Custom image</md-option>
                      </md-select>
                    </md-input-container>
                    <div flex>
                      <div ng-if="button.icon.type === 'icon'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.icon.code" placeholder="Icon code">
                        </md-input-container>
                      </div>
                      <div ng-if="button.icon.type === 'text'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.icon.text" placeholder="Button text">
                        </md-input-container>
                      </div>
                      <div ng-if="button.icon.type === 'image'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.icon.image" placeholder="Image url">
                        </md-input-container>
                      </div>
                    </div>
                  </div>
                  <div flex="40" layout="row">
                    <md-input-container class="dropdown md-no-underline">
                      <label>Action</label>
                      <md-select name="style" class="compact md-no-underline" ng-model="button.action.type" placeholder="Action">
                        <md-option value="command">Command</md-option>
                        <md-option value="url">Open url</md-option>
                        <md-option value="custom">Custom</md-option>
                      </md-select>
                    </md-input-container>
                    <div flex>
                      <div ng-if="button.action.type === 'command'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.action.command" placeholder="Command">
                        </md-input-container>
                      </div>
                      <div ng-if="button.action.type === 'url'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.action.url" placeholder="Url">
                        </md-input-container>
                      </div>
                      <div ng-if="button.action.type === 'custom'">
                        <md-input-container class="text-input">
                          <input type="text" ng-model="button.action.custom" placeholder="Custom action">
                        </md-input-container>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
              <md-button class="md-primary md-raised" ng-click="dialogCtrl.addModButton()">Add</md-button>
            </md-content>
          </md-tab>
        </md-tabs>
      </div>
    </md-dialog-content>
  </form>
</md-dialog>
